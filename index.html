<iframe
  id="nemId"
  style="width: 100vw; height: 100vh;"
></iframe>
<script>
  const nemIdFrame = document.getElementById('nemId');

  nemIdFrame.src = `https://appletk.danid.dk/launcher/lmt/${Date.now()}`;
  
  const receiveMessage = (event) => {
    console.log(event);
    alert(`${event.origin}, ${JSON.stringify(event.data)}`);
    
    const { command, content } = JSON.parse(event.data);

    if (event.origin === 'https://appletk.danid.dk') {
      if (window.ReactNativeWebView != null) {
        window.ReactNativeWebView.postMessage(event.data);
        alert('Sent!');
      } else {
        alert('RNWebView is null!');
      }
    }
    /*
    if (command === 'SendParameters') {
      const msg = JSON.stringify({
          command: 'parameters',
          content: params,
        });
      console.log({ msg });
      nemIdFrame.contentWindow.postMessage(
        msg,
        'https://appletk.danid.dk/',
      );
    } else {
      console.log({ command, content });
      console.log({ code: atob(content) });
    }
    */
  };
  window.addEventListener("message", receiveMessage, true);
</script>
