<iframe
  id="nemId"
  style="width: 300px; height: 400px;"
></iframe>
<strong>V1.4</strong>
<script>
  const nemIdFrame = document.getElementById('nemId');

  nemIdFrame.src = `https://appletk.danid.dk/launcher/lmt/${Date.now()}`;
  
  const receiveMessage = (event) => {
    console.log(event);
    const { command, content } = JSON.parse(event.data);
    const params = '{"TIMESTAMP":"1587633435000","CLIENTFLOW":"OCESLOGIN2","SP_CERT":"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","PARAMS_DIGEST":"SHVvvOeazkw/g5EmmTuMUaAf7sPgSHp8zBybrA5lKj8=","DIGEST_SIGNATURE":"FufrlCJXHPlU0bkyAnoxJnS1TnvtsxC9ZQHEN64X7937BIhMDLQau6uWYbUw5ueJlkj+sZd/3M7p0T2sxC/1gk9TrLQ9OTbn0uW5BBjNCOv2g+onyt7oeHUpUznBe8ZccyYHOPllmhP0wABrKK3pxXF5Ulzw/gT5J3j76oxfdBe+OOPoNNpWrk8MsVyvCXkz9X90FJit5rlt+sayUa7VVvfJN6ykqxNQucOR7zduv5QfELnLoyHSoe0me8WUb+EWNttpOtcHYobBqqf0wc2vEviT6lCTA1jlqhoSGYIAmXosPV8pOuZO87DKjqkBgY+JaVz6d7QUrSNBUTuY2N/DZg=="}';
    if (command === 'SendParameters') {
      const msg = JSON.stringify({
          command: 'parameters',
          content: params,
        });
      console.log({ msg });
      nemIdFrame.contentWindow.postMessage(
        msg,
        'https://appletk.danid.dk/',
      );
    } else {
      console.log({ command, content });
      console.log({ code: atob(content) });
    }
  };
  window.addEventListener("message", receiveMessage, true);
</script>
